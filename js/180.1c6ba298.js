"use strict";(self["webpackChunkadmin_motosusadas_uy"]=self["webpackChunkadmin_motosusadas_uy"]||[]).push([[180],{6180:function(e,l,a){a.r(l),a.d(l,{default:function(){return H}});a(4114);var t=a(641),s=a(33),i=a(3751),o=a(2807),u=a(276),d=a(418),c=a(5272),n=a(2162),r=a(2421),m=a(3813),b=a(6756),v=a(5526),p=a(9669),f=a(3948);const k={class:"d-none d-sm-inline"},h={class:"d-md-none"},_={class:"filter-subtitle"},F={class:"filter-subtitle"},V={class:"d-none d-md-block"},g={class:"filter-title"},y={class:"filter-subtitle"},L={class:"filter-subtitle"};function w(e,l,a,w,$,U){const x=(0,t.g2)("Heading"),B=(0,t.g2)("users-table"),A=(0,t.g2)("SplitView");return(0,t.uX)(),(0,t.Wv)(m.I,{fluid:"",class:"py-0"},{default:(0,t.k6)((()=>[(0,t.bF)(x,null,{title:(0,t.k6)((()=>[(0,t.Lk)("h2",null,(0,s.v_)(e.$t("users")),1),(0,t.Lk)("p",null,(0,s.v_)(e.$t("users-management")),1)])),actions:(0,t.k6)((()=>[(0,t.bF)(o.D,{color:"primary",variant:"flat",elevation:"0",onClick:l[0]||(l[0]=(0,i.D$)((e=>w.router.push({name:"users-create"})),["prevent"]))},{default:(0,t.k6)((()=>[(0,t.bF)(p.w,null,{default:(0,t.k6)((()=>[(0,t.eW)("mdi-plus")])),_:1}),(0,t.Lk)("span",k,(0,s.v_)(e.$t("new-user")),1)])),_:1})])),_:1}),(0,t.bF)(A,{class:"mt-3"},{auxiliar:(0,t.k6)((()=>[(0,t.Lk)("div",h,[(0,t.bF)(d.$t,{variant:"accordion",modelValue:w.mobileFiltersExpanded,"onUpdate:modelValue":l[8]||(l[8]=e=>w.mobileFiltersExpanded=e)},{default:(0,t.k6)((()=>[(0,t.bF)(c.c,null,{default:(0,t.k6)((()=>[(0,t.bF)(n.w,{class:"mobile-filters-title"},{default:(0,t.k6)((()=>[(0,t.bF)(p.w,{class:"mr-2"},{default:(0,t.k6)((()=>[(0,t.eW)("mdi-filter-variant")])),_:1}),(0,t.Lk)("h4",null,(0,s.v_)(e.$t("filter-by")),1)])),_:1}),(0,t.bF)(r.T,null,{default:(0,t.k6)((()=>[(0,t.bF)(b.L,null,{default:(0,t.k6)((()=>[(0,t.bF)(v.B,{cols:"12",class:"pb-2"},{default:(0,t.k6)((()=>[(0,t.bF)(f.W,{class:"simple-search-result",variant:"outlined",label:e.$t("search"),"prepend-inner-icon":"mdi-magnify",clearable:"",modelValue:w.filters.keyword,"onUpdate:modelValue":l[1]||(l[1]=e=>w.filters.keyword=e)},null,8,["label","modelValue"])])),_:1})])),_:1}),(0,t.bF)(b.L,{class:"filter-section"},{default:(0,t.k6)((()=>[(0,t.bF)(v.B,{cols:"12",class:"pb-1"},{default:(0,t.k6)((()=>[(0,t.Lk)("h5",_,(0,s.v_)(e.$t("status")),1)])),_:1}),(0,t.bF)(v.B,{cols:"6",class:"checkbox-col"},{default:(0,t.k6)((()=>[(0,t.bF)(u.a,{modelValue:w.filters.active,"onUpdate:modelValue":l[2]||(l[2]=e=>w.filters.active=e),value:null,label:e.$t("all"),"hide-details":"",density:"compact"},null,8,["modelValue","label"])])),_:1}),(0,t.bF)(v.B,{cols:"6",class:"checkbox-col"},{default:(0,t.k6)((()=>[(0,t.bF)(u.a,{modelValue:w.filters.active,"onUpdate:modelValue":l[3]||(l[3]=e=>w.filters.active=e),value:!0,label:e.$t("active"),"hide-details":"",density:"compact"},null,8,["modelValue","label"])])),_:1}),(0,t.bF)(v.B,{cols:"6",class:"checkbox-col"},{default:(0,t.k6)((()=>[(0,t.bF)(u.a,{modelValue:w.filters.active,"onUpdate:modelValue":l[4]||(l[4]=e=>w.filters.active=e),value:!1,label:e.$t("inactive"),"hide-details":"",density:"compact"},null,8,["modelValue","label"])])),_:1})])),_:1}),(0,t.bF)(b.L,{class:"filter-section"},{default:(0,t.k6)((()=>[(0,t.bF)(v.B,{cols:"12",class:"pb-1 pt-2"},{default:(0,t.k6)((()=>[(0,t.Lk)("h5",F,(0,s.v_)(e.$t("role")),1)])),_:1}),(0,t.bF)(v.B,{cols:"6",class:"checkbox-col"},{default:(0,t.k6)((()=>[(0,t.bF)(u.a,{modelValue:w.filters.authLevel,"onUpdate:modelValue":l[5]||(l[5]=e=>w.filters.authLevel=e),value:null,label:e.$t("all"),"hide-details":"",density:"compact"},null,8,["modelValue","label"])])),_:1}),(0,t.bF)(v.B,{cols:"6",class:"checkbox-col"},{default:(0,t.k6)((()=>[(0,t.bF)(u.a,{modelValue:w.filters.authLevel,"onUpdate:modelValue":l[6]||(l[6]=e=>w.filters.authLevel=e),value:2,label:e.$t("roles.admin"),"hide-details":"",density:"compact"},null,8,["modelValue","label"])])),_:1}),(0,t.bF)(v.B,{cols:"6",class:"checkbox-col"},{default:(0,t.k6)((()=>[(0,t.bF)(u.a,{modelValue:w.filters.authLevel,"onUpdate:modelValue":l[7]||(l[7]=e=>w.filters.authLevel=e),value:1,label:e.$t("roles.agency"),"hide-details":"",density:"compact"},null,8,["modelValue","label"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])]),(0,t.Lk)("div",V,[(0,t.bF)(b.L,null,{default:(0,t.k6)((()=>[(0,t.bF)(v.B,{cols:"12",class:"pb-2"},{default:(0,t.k6)((()=>[(0,t.bF)(f.W,{class:"simple-search-result",variant:"outlined",label:e.$t("search"),"prepend-inner-icon":"mdi-magnify",clearable:"",modelValue:w.filters.keyword,"onUpdate:modelValue":l[9]||(l[9]=e=>w.filters.keyword=e)},null,8,["label","modelValue"])])),_:1})])),_:1}),(0,t.bF)(b.L,null,{default:(0,t.k6)((()=>[(0,t.bF)(v.B,{cols:"12",class:"pb-2 pt-2"},{default:(0,t.k6)((()=>[(0,t.Lk)("h4",g,(0,s.v_)(e.$t("filter-by")),1)])),_:1})])),_:1}),(0,t.bF)(b.L,{class:"filter-section"},{default:(0,t.k6)((()=>[(0,t.bF)(v.B,{cols:"12",class:"pb-1"},{default:(0,t.k6)((()=>[(0,t.Lk)("h5",y,(0,s.v_)(e.$t("status")),1)])),_:1}),(0,t.bF)(v.B,{cols:"6",class:"checkbox-col"},{default:(0,t.k6)((()=>[(0,t.bF)(u.a,{modelValue:w.filters.active,"onUpdate:modelValue":l[10]||(l[10]=e=>w.filters.active=e),value:null,label:e.$t("all"),"hide-details":"",density:"compact"},null,8,["modelValue","label"])])),_:1}),(0,t.bF)(v.B,{cols:"6",class:"checkbox-col"},{default:(0,t.k6)((()=>[(0,t.bF)(u.a,{modelValue:w.filters.active,"onUpdate:modelValue":l[11]||(l[11]=e=>w.filters.active=e),value:!0,label:e.$t("active"),"hide-details":"",density:"compact"},null,8,["modelValue","label"])])),_:1}),(0,t.bF)(v.B,{cols:"6",class:"checkbox-col"},{default:(0,t.k6)((()=>[(0,t.bF)(u.a,{modelValue:w.filters.active,"onUpdate:modelValue":l[12]||(l[12]=e=>w.filters.active=e),value:!1,label:e.$t("inactive"),"hide-details":"",density:"compact"},null,8,["modelValue","label"])])),_:1})])),_:1}),(0,t.bF)(b.L,{class:"filter-section"},{default:(0,t.k6)((()=>[(0,t.bF)(v.B,{cols:"12",class:"pb-1 pt-2"},{default:(0,t.k6)((()=>[(0,t.Lk)("h5",L,(0,s.v_)(e.$t("role")),1)])),_:1}),(0,t.bF)(v.B,{cols:"6",class:"checkbox-col"},{default:(0,t.k6)((()=>[(0,t.bF)(u.a,{modelValue:w.filters.authLevel,"onUpdate:modelValue":l[13]||(l[13]=e=>w.filters.authLevel=e),value:null,label:e.$t("all"),"hide-details":"",density:"compact"},null,8,["modelValue","label"])])),_:1}),(0,t.bF)(v.B,{cols:"6",class:"checkbox-col"},{default:(0,t.k6)((()=>[(0,t.bF)(u.a,{modelValue:w.filters.authLevel,"onUpdate:modelValue":l[14]||(l[14]=e=>w.filters.authLevel=e),value:2,label:e.$t("roles.admin"),"hide-details":"",density:"compact"},null,8,["modelValue","label"])])),_:1}),(0,t.bF)(v.B,{cols:"6",class:"checkbox-col"},{default:(0,t.k6)((()=>[(0,t.bF)(u.a,{modelValue:w.filters.authLevel,"onUpdate:modelValue":l[15]||(l[15]=e=>w.filters.authLevel=e),value:1,label:e.$t("roles.agency"),"hide-details":"",density:"compact"},null,8,["modelValue","label"])])),_:1})])),_:1})])])),default:(0,t.k6)((()=>[(0,t.bF)(B,{search:w.filters.keyword,active:w.filters.active,"auth-level":w.filters.authLevel},null,8,["search","active","auth-level"])])),_:1})])),_:1})}var $=a(953),U=a(8118),x=a(768),B=a(8995);const A={class:"table-container"},R={class:"payment-buttons buttons buttons--4",style:{"white-space":"nowrap"}};function W(e,l,a,i,u,d){const c=(0,t.g2)("RemoveDialog"),n=(0,t.g2)("datatable");return(0,t.uX)(),(0,t.CE)("div",A,[(0,t.bF)(n,{headers:i.headers,items:i.users,"items-per-page":i.itemsPerPage,"total-items":i.total,page:i.page,"onUpdate:options":i.handleTableOptions,class:"v-data-table--in-row-headers",headerless:""},{"item.fullName":(0,t.k6)((({item:e})=>[(0,t.Lk)("span",null,(0,s.v_)(i.getRoleLabel(e.authLevel)),1),(0,t.Lk)("span",null,(0,s.v_)(e.fullName),1)])),"item.email":(0,t.k6)((({item:l})=>[(0,t.Lk)("span",null,(0,s.v_)(e.$t("email")),1),(0,t.Lk)("span",null,(0,s.v_)(l.email),1)])),"item.active":(0,t.k6)((({item:l})=>[(0,t.bF)(B.x,{color:l.active?"success":"error",size:"small"},{default:(0,t.k6)((()=>[(0,t.eW)((0,s.v_)(l.active?e.$t("active"):e.$t("inactive")),1)])),_:2},1032,["color"])])),"item.agencyName":(0,t.k6)((({item:l})=>[(0,t.Lk)("span",null,(0,s.v_)(e.$t("agency")),1),(0,t.Lk)("span",null,(0,s.v_)(l.agencyName||"-"),1)])),"item.actions":(0,t.k6)((({item:e})=>[(0,t.Lk)("div",R,[(0,t.bF)(o.D,{small:"",icon:"",class:"pl-0 pr-0 fg-primary",onClick:l=>i.info(e.id)},{default:(0,t.k6)((()=>[(0,t.bF)(p.w,{"max-width":"22px"},{default:(0,t.k6)((()=>[(0,t.eW)("mdi-information-outline")])),_:1})])),_:2},1032,["onClick"]),(0,t.bF)(o.D,{small:"",icon:"",class:"ml-2 pl-0 pr-0",onClick:l=>i.edit(e.id)},{default:(0,t.k6)((()=>[(0,t.bF)(p.w,{color:"primary","max-width":"40px"},{default:(0,t.k6)((()=>[(0,t.eW)("mdi-circle-edit-outline")])),_:1})])),_:2},1032,["onClick"]),(0,t.bF)(o.D,{small:"",icon:"",class:"ml-2 pl-0 pr-0",onClick:l=>i.openRemoveDialog(e.id)},{default:(0,t.k6)((()=>[(0,t.bF)(p.w,{color:"error","max-width":"40px"},{default:(0,t.k6)((()=>[(0,t.eW)("mdi-delete-outline")])),_:1})])),_:2},1032,["onClick"]),(0,t.bF)(c,{item:e,show:i.dialogVisibleId===e.id,onRemoved:i.reload,"onUpdate:show":l=>i.onDialogUpdate(l,e.id)},null,8,["item","show","onRemoved","onUpdate:show"])])])),_:1},8,["headers","items","items-per-page","total-items","page","onUpdate:options"])])}var C=a(1459),P=a(9879),D=a(6278),E=a(2109),N=a(9638),I=a(8309),K={components:{Datatable:P.A,RemoveDialog:E.A},props:{search:{type:String,default:""},active:{type:[Boolean,null],default:null},authLevel:{type:[Number,null],default:null}},setup(e){const l=(0,D.Pj)(),a=(0,$.KR)(1),s=(0,$.KR)(10),i=(0,t.EW)((()=>l.state.users.users||[])),o=(0,t.EW)((()=>l.state.users.total||0)),u=(0,$.KR)(null),d=(0,$.KR)(!1),c=async(t={})=>{if(!d.value)try{d.value=!0;const i={search:e.search||null,limit:t.itemsPerPage||s.value,offset:((t.page||a.value)-1)*(t.itemsPerPage||s.value),active:e.active,authLevel:e.authLevel};await l.dispatch("users/loadUsers",i)}catch(i){l.dispatch("notificator/errorResponse",i)}finally{d.value=!1}},n=e=>{a.value=e.page,s.value=e.itemsPerPage,c(e)};(0,t.wB)([()=>e.search,()=>e.active,()=>e.authLevel],(()=>{a.value=1,c({page:a.value,itemsPerPage:s.value})}));const r=(0,t.EW)((()=>[{title:"Usuario",value:"fullName",align:"start",sortable:!1},{title:"Email",value:"email",align:"start",sortable:!1},{title:"Estado",value:"active",align:"start",sortable:!1},{title:"Agencia",value:"agencyName",align:"start",sortable:!1},{title:"Acciones",value:"actions",align:"center",sortable:!1}])),m=e=>e===N.A.Admin?I.A.global.t("roles.admin"):e===N.A.Agency?I.A.global.t("roles.agency"):"",b=e=>{C.A.push({name:"users-edit",params:{id:e}})},v=e=>{C.A.push({name:"users-details",params:{id:e}})},p=e=>{u.value=e},f=(e,l)=>{e||u.value!==l||(u.value=null)};return{headers:r,users:i,total:o,page:a,itemsPerPage:s,handleTableOptions:n,edit:b,info:v,reload:c,getRoleLabel:m,dialogVisibleId:u,openRemoveDialog:p,onDialogUpdate:f}}},j=a(6262);const O=(0,j.A)(K,[["render",W],["__scopeId","data-v-dc4279be"]]);var T=O,S=a(5220),X={components:{Heading:U.A,UsersTable:T,SplitView:x.A},setup(){const e=(0,S.rd)(),l=(0,$.KR)([]),a=(0,$.Kh)({keyword:"",active:null,authLevel:null});return{filters:a,router:e,mobileFiltersExpanded:l}}};const q=(0,j.A)(X,[["render",w],["__scopeId","data-v-11c6ea50"]]);var H=q},2109:function(e,l,a){a.d(l,{A:function(){return r}});var t=a(641),s=a(33);function i(e,l,a,i,o,u){const d=(0,t.g2)("confirm-dialog");return(0,t.uX)(),(0,t.Wv)(d,{"model-value":a.show,"onUpdate:modelValue":l[0]||(l[0]=l=>e.$emit("update:show",l)),onConfirmed:i.remove},{title:(0,t.k6)((()=>[(0,t.eW)((0,s.v_)(e.$t("delete-user")),1)])),default:(0,t.k6)((()=>[(0,t.eW)(" "+(0,s.v_)(e.$t("delete-user-confirmation",{name:a.item?a.item.fullName:"-"})),1)])),_:1},8,["model-value","onConfirmed"])}var o=a(6278),u=a(4863),d={components:{ConfirmDialog:u.A},props:{item:{type:Object,required:!1,default:null},show:{type:Boolean,default:!1}},emits:["removed","update:show"],setup(e,{emit:l}){const a=(0,o.Pj)(),t=async()=>{try{await a.dispatch("users/deleteUser",e.item.id),await a.dispatch("notificator/success","user-deleted-success"),l("removed"),l("update:show",!1)}catch(t){await a.dispatch("notificator/errorResponse",t)}};return{remove:t}}},c=a(6262);const n=(0,c.A)(d,[["render",i]]);var r=n},276:function(e,l,a){a.d(l,{a:function(){return v}});var t=a(641),s=a(61),i=a(5035),o=a(6935),u=a(2067),d=a(4587),c=a(9094),n=a(1247),r=a(7861),m=a(4600);const b=(0,d.j)({...(0,i.V)(),...(0,c.cJ)((0,s.O)(),["inline"])},"VCheckbox"),v=(0,n.RW)()({name:"VCheckbox",inheritAttrs:!1,props:b(),emits:{"update:modelValue":e=>!0,"update:focused":e=>!0},setup(e,l){let{attrs:a,slots:d}=l;const n=(0,u.q)(e,"modelValue"),{isFocused:b,focus:v,blur:p}=(0,o.i)(e),f=(0,r.v6)(),k=(0,t.EW)((()=>e.id||`checkbox-${f}`));return(0,m.C)((()=>{const[l,o]=(0,c.ph)(a),u=i.Z.filterProps(e),r=s.M.filterProps(e);return(0,t.bF)(i.Z,(0,t.v6)({class:["v-checkbox",e.class]},l,u,{modelValue:n.value,"onUpdate:modelValue":e=>n.value=e,id:k.value,focused:b.value,style:e.style}),{...d,default:e=>{let{id:l,messagesId:a,isDisabled:i,isReadonly:u}=e;return(0,t.bF)(s.M,(0,t.v6)(r,{id:l.value,"aria-describedby":a.value,disabled:i.value,readonly:u.value},o,{modelValue:n.value,"onUpdate:modelValue":e=>n.value=e,onFocus:v,onBlur:p}),d)}})})),{}}})}}]);
//# sourceMappingURL=180.1c6ba298.js.map