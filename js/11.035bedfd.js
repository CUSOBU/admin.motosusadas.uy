"use strict";(self["webpackChunkadmin_motosusadas_uy"]=self["webpackChunkadmin_motosusadas_uy"]||[]).push([[11],{678:function(e,t,a){a.r(t),a.d(t,{default:function(){return $}});var l=a(641),s=a(33),u=a(3751),n=a(2807),r=a(3813),o=a(6756),i=a(5526),d=a(9669);const c={class:"d-flex align-center"},v={class:"fg-primary"},m={class:"fg-primary"};function f(e,t,a,f,_,k){const p=(0,l.g2)("Heading"),b=(0,l.g2)("search-users"),h=(0,l.g2)("attribute"),g=(0,l.g2)("RemoveDialog"),w=(0,l.g2)("SplitContent");return(0,l.uX)(),(0,l.Wv)(r.I,{fluid:"",class:"py-0"},{default:(0,l.k6)((()=>[(0,l.bF)(p,null,{title:(0,l.k6)((()=>[(0,l.Lk)("div",c,[(0,l.bF)(n.D,{icon:"",variant:"text",onClick:f.goBack,class:"mr-2"},{default:(0,l.k6)((()=>[(0,l.bF)(d.w,null,{default:(0,l.k6)((()=>[(0,l.eW)("mdi-arrow-left")])),_:1})])),_:1},8,["onClick"]),(0,l.Lk)("div",null,[(0,l.Lk)("h2",null,(0,s.v_)(e.$t("users-.details")),1),(0,l.Lk)("p",null,(0,s.v_)(e.$t("users-.details-sub-heading")),1)])])])),actions:(0,l.k6)((()=>[(0,l.eW)("Â  ")])),_:1}),(0,l.bo)((0,l.bF)(w,{"hide-auxiliar":!f.user},{auxiliar:(0,l.k6)((()=>[(0,l.bF)(b)])),default:(0,l.k6)((()=>[(0,l.bF)(r.I,{fluid:""},{default:(0,l.k6)((()=>[f.user?((0,l.uX)(),(0,l.Wv)(o.L,{key:0},{default:(0,l.k6)((()=>[(0,l.bF)(i.B,null,{default:(0,l.k6)((()=>[(0,l.Lk)("h4",v,(0,s.v_)(f.getRoleLabel(f.user.authLevel)),1),(0,l.bF)(h,null,{name:(0,l.k6)((()=>[(0,l.eW)((0,s.v_)(e.$t("name")),1)])),default:(0,l.k6)((()=>[(0,l.eW)(" "+(0,s.v_)(f.user.fullName),1)])),_:1})])),_:1}),(0,l.bF)(i.B,{cols:"6",class:"svg-buttons small-buttons text-right"},{default:(0,l.k6)((()=>[(0,l.bF)(n.D,{small:"",text:"",class:"fg-blue",onClick:t[0]||(t[0]=e=>f.user&&f.edit(f.user.id))},{default:(0,l.k6)((()=>[(0,l.bF)(d.w,{small:""},{default:(0,l.k6)((()=>[(0,l.eW)("mdi-pencil")])),_:1}),(0,l.eW)(" "+(0,s.v_)(e.$t("edit")),1)])),_:1}),(0,l.bF)(n.D,{small:"",text:"",class:"fg-red",onClick:t[1]||(t[1]=e=>f.dialogVisible=!0)},{default:(0,l.k6)((()=>[(0,l.bF)(d.w,{small:""},{default:(0,l.k6)((()=>[(0,l.eW)("mdi-delete")])),_:1}),(0,l.eW)(" "+(0,s.v_)(e.$t("delete")),1)])),_:1})])),_:1})])),_:1})):(0,l.Q3)("",!0),(0,l.bF)(g,{item:f.user,show:f.dialogVisible,onRemoved:f.onRemoved,"onUpdate:show":t[2]||(t[2]=e=>f.dialogVisible=e)},null,8,["item","show","onRemoved"]),(0,l.bF)(o.L,null,{default:(0,l.k6)((()=>[(0,l.bF)(i.B,null,{default:(0,l.k6)((()=>[(0,l.Lk)("h4",m,(0,s.v_)(e.$t("account")),1)])),_:1})])),_:1}),f.user?((0,l.uX)(),(0,l.Wv)(o.L,{key:1,class:"bottom-lined"},{default:(0,l.k6)((()=>[(0,l.bF)(i.B,{cols:"6"},{default:(0,l.k6)((()=>[(0,l.bF)(h,null,{name:(0,l.k6)((()=>[(0,l.eW)((0,s.v_)(e.$t("email")),1)])),default:(0,l.k6)((()=>[(0,l.eW)(" "+(0,s.v_)(f.user.email),1)])),_:1})])),_:1}),(0,l.bF)(i.B,{cols:"6"},{default:(0,l.k6)((()=>[(0,l.bF)(h,null,{name:(0,l.k6)((()=>[(0,l.eW)((0,s.v_)(e.$t("agency")),1)])),default:(0,l.k6)((()=>[(0,l.eW)(" "+(0,s.v_)(f.user.agencyName||"-"),1)])),_:1})])),_:1}),(0,l.bF)(i.B,{cols:"6"},{default:(0,l.k6)((()=>[(0,l.bF)(h,null,{name:(0,l.k6)((()=>[(0,l.eW)((0,s.v_)(e.$t("active")),1)])),default:(0,l.k6)((()=>[(0,l.eW)(" "+(0,s.v_)(f.user.active?e.$t("yes"):e.$t("no")),1)])),_:1})])),_:1}),(0,l.bF)(i.B,{cols:"6"},{default:(0,l.k6)((()=>[(0,l.bF)(h,null,{name:(0,l.k6)((()=>[(0,l.eW)((0,s.v_)(e.$t("createdAt")),1)])),default:(0,l.k6)((()=>[(0,l.eW)(" "+(0,s.v_)(f.formatDate(f.user.createdAt)),1)])),_:1})])),_:1}),(0,l.bF)(i.B,{cols:"6"},{default:(0,l.k6)((()=>[(0,l.bF)(h,null,{name:(0,l.k6)((()=>[(0,l.eW)((0,s.v_)(e.$t("phoneNumber")),1)])),default:(0,l.k6)((()=>[(0,l.eW)(" "+(0,s.v_)(f.user.phoneNumber||"-"),1)])),_:1})])),_:1})])),_:1})):(0,l.Q3)("",!0)])),_:1})])),_:1},8,["hide-auxiliar"]),[[u.aG,!f.isLoading]])])),_:1})}a(4114);var _=a(953),k=a(6278),p=a(8118),b=a(768),h=a(5152),g=a(5220),w=a(6808),y=a(8370),F=a(2109),A=a(8309),W={components:{Heading:p.A,SplitContent:b.A,searchUsers:h.A,Attribute:y.A,RemoveDialog:F.A},setup(){const e=(0,k.Pj)(),t=(0,_.KR)(null),a=(0,g.rd)(),s=(0,g.lq)(),u=(0,_.KR)(!1),n=(0,_.KR)(!0),r=e=>{a.push({name:"users-edit",params:{id:e}})},o=()=>{a.push({name:"users"})},i=async()=>{if(t.value)try{await e.dispatch("users/deleteUser",t.value.id),u.value=!1,a.push({name:"users"}),await e.dispatch("users/loadUsers")}catch(l){e.dispatch("notificator/errorResponse",l)}},d=async()=>{u.value=!1;try{await Promise.resolve(),await new Promise((e=>setTimeout(e,120))),t.value=null,await e.dispatch("users/loadUsers")}catch(l){e.dispatch("notificator/errorResponse",l)}a.push({name:"users"})},c=async a=>{try{e.dispatch("SET_LOADING",!0);const l=await w.A.getUserById(a);t.value=l||null}catch(l){e.dispatch("notificator/errorResponse",l),t.value=null}finally{e.dispatch("SET_LOADING",!1),n.value=!1}};(0,l.sV)((async()=>{const e=s.params.id;"string"===typeof e?await c(e):n.value=!1})),(0,l.wB)((()=>s.params.id),(async e=>{"string"===typeof e&&await c(e)}));const v=e=>1===e?A.A.global.t("roles.agency"):2===e?A.A.global.t("roles.admin"):"",m=e=>{if(!e)return"-";try{const t=new Date(e);return t.toLocaleString()}catch(t){return e}};return{user:t,isLoading:n,edit:r,goBack:o,remove:i,onRemoved:d,dialogVisible:u,getRoleLabel:v,formatDate:m}}},L=a(6262);const R=(0,L.A)(W,[["render",f],["__scopeId","data-v-152ad6a3"]]);var $=R},2109:function(e,t,a){a.d(t,{A:function(){return c}});var l=a(641),s=a(33);function u(e,t,a,u,n,r){const o=(0,l.g2)("confirm-dialog");return(0,l.uX)(),(0,l.Wv)(o,{"model-value":a.show,"onUpdate:modelValue":t[0]||(t[0]=t=>e.$emit("update:show",t)),onConfirmed:u.remove},{title:(0,l.k6)((()=>[(0,l.eW)((0,s.v_)(e.$t("delete-user")),1)])),default:(0,l.k6)((()=>[(0,l.eW)(" "+(0,s.v_)(e.$t("delete-user-confirmation",{name:a.item?a.item.fullName:"-"})),1)])),_:1},8,["model-value","onConfirmed"])}var n=a(6278),r=a(4863),o={components:{ConfirmDialog:r.A},props:{item:{type:Object,required:!1,default:null},show:{type:Boolean,default:!1}},emits:["removed","update:show"],setup(e,{emit:t}){const a=(0,n.Pj)(),l=async()=>{try{await a.dispatch("users/deleteUser",e.item.id),await a.dispatch("notificator/success","user-deleted-success"),t("removed"),t("update:show",!1)}catch(l){await a.dispatch("notificator/errorResponse",l)}};return{remove:l}}},i=a(6262);const d=(0,i.A)(o,[["render",u]]);var c=d},5152:function(e,t,a){a.d(t,{A:function(){return w}});var l=a(641),s=a(33),u=a(6756),n=a(5526),r=a(2164),o=a(7254),i=a(7294),d=a(7505),c=a(3948);const v={class:"text--primary"};function m(e,t,a,m,f,_){return(0,l.uX)(),(0,l.Wv)(u.L,null,{default:(0,l.k6)((()=>[(0,l.bF)(n.B,null,{default:(0,l.k6)((()=>[(0,l.bF)(u.L,null,{default:(0,l.k6)((()=>[(0,l.bF)(n.B,{class:"mt-2"},{default:(0,l.k6)((()=>[(0,l.bF)(c.W,{dense:"","hide-details":"",modelValue:m.search,"onUpdate:modelValue":t[0]||(t[0]=e=>m.search=e),variant:"outlined",label:e.$t("search")},null,8,["modelValue","label"])])),_:1})])),_:1}),(0,l.bF)(u.L,null,{default:(0,l.k6)((()=>[(0,l.bF)(n.B,{class:"py-0"},{default:(0,l.k6)((()=>[(0,l.bF)(r.x,{class:"v-list-search-result"},{default:(0,l.k6)((()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(m.filteredUsers,((t,a)=>((0,l.uX)(),(0,l.Wv)(o.g,{key:a,color:"primary",onClick:e=>m.selectedItem=a,selected:m.selectedItem===a},{default:(0,l.k6)((()=>[(0,l.bF)(i.U,null,{default:(0,l.k6)((()=>[(0,l.eW)((0,s.v_)(t.fullName?t.fullName:t.phoneNumber),1)])),_:2},1024),(0,l.bF)(d.w,null,{default:(0,l.k6)((()=>[(0,l.Lk)("span",v,(0,s.v_)(e.$t("roles."+m.getRoleKey(t.authLevel)))+":",1),(0,l.eW)(" "+(0,s.v_)(t.email?t.email:t.phoneNumber),1)])),_:2},1024)])),_:2},1032,["onClick","selected"])))),128))])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}a(4114);var f=a(5220),_=a(953),k=a(6278),p=a(9638),b={name:"SearchUsers",setup(){const e=(0,f.rd)(),t=(0,f.lq)(),a=(0,k.Pj)(),s=(0,_.KR)(null),u=(0,_.KR)(""),n=(0,_.KR)(null),r=(0,l.EW)((()=>a.state.users.users||[])),o=(0,l.EW)((()=>{if(!u.value)return r.value;const e=u.value.toLowerCase();return r.value.filter((t=>t.fullName&&t.fullName.toLowerCase().includes(e)||t.email&&t.email.toLowerCase().includes(e)||t.phoneNumber&&t.phoneNumber.toLowerCase().includes(e)))}));(0,l.wB)(u,(async()=>{s.value&&clearTimeout(s.value),s.value=window.setTimeout((function(){i()}),1e3)})),(0,l.wB)(n,(async t=>{let a="users-edit";"users-details"===e.currentRoute.value.name&&(a="users-details"),null!==n.value&&o.value[n.value]&&e.push({name:a,params:{id:o.value[n.value].id}})}));const i=async()=>{try{const e={search:u.value||null,limit:20,offset:0};await a.dispatch("users/loadUsers",e)}catch(e){a.dispatch("notificator/errorResponse",e)}};(0,l.sV)((async()=>{if(await i(),o.value){const e=o.value.findIndex((e=>e.id===t.params.id));-1!==e&&(n.value=e)}}));const d=e=>e===p.A.Admin?"admin":(p.A.Agency,"agency");return{users:r,timeout:s,search:u,selectedItem:n,loadItems:i,filteredUsers:o,getRoleKey:d}}},h=a(6262);const g=(0,h.A)(b,[["render",m],["__scopeId","data-v-0b675cca"]]);var w=g},8370:function(e,t,a){a.d(t,{A:function(){return i}});var l=a(641);const s={class:"attribute"};function u(e,t,a,u,n,r){return(0,l.uX)(),(0,l.CE)("div",s,[(0,l.Lk)("div",null,[(0,l.RG)(e.$slots,"name",{},void 0,!0)]),(0,l.Lk)("div",null,[(0,l.RG)(e.$slots,"default",{},void 0,!0)])])}var n={setup(){return(0,l.sV)((()=>{})),{}}},r=a(6262);const o=(0,r.A)(n,[["render",u],["__scopeId","data-v-5e7806b8"]]);var i=o},8118:function(e,t,a){a.d(t,{A:function(){return k}});var l=a(641),s=a(33),u=a(2807),n=a(6756),r=a(5526),o=a(9669);const i={class:"heading-container"};function d(e,t,a,d,c,v){return(0,l.uX)(),(0,l.CE)("div",i,[(0,l.bF)(n.L,{class:"mt-5"},{default:(0,l.k6)((()=>[(0,l.bF)(r.B,{cols:"8",sm:"4",class:"heading-title"},{default:(0,l.k6)((()=>[(0,l.RG)(e.$slots,"title",{},(()=>[(0,l.Lk)("h2",null,(0,s.v_)(e.$t("dashboard")),1),(0,l.Lk)("p",null,(0,s.v_)(e.$t("dashboard-welcome")),1)]),!0)])),_:3}),(0,l.bF)(r.B,{cols:"4",sm:"8",class:"heading-actions"},{default:(0,l.k6)((()=>[(0,l.RG)(e.$slots,"actions",{},void 0,!0),d.lgAndUp?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.Wv)(u.D,{key:0,text:"",dark:"",class:"action-btn",onClick:d.toggleDrawer},{default:(0,l.k6)((()=>[(0,l.bF)(o.w,{color:"#2d6283"},{default:(0,l.k6)((()=>[(0,l.eW)("mdi-menu")])),_:1})])),_:1},8,["onClick"]))])),_:3})])),_:3})])}var c=a(6278),v=a(8353),m={setup(){const{lgAndUp:e}=(0,v._F)(),t=(0,c.Pj)(),a=()=>{t.commit("toggleDrawer")};return{lgAndUp:e,toggleDrawer:a}}},f=a(6262);const _=(0,f.A)(m,[["render",d],["__scopeId","data-v-6ab045b7"]]);var k=_},768:function(e,t,a){a.d(t,{A:function(){return c}});var l=a(641),s=a(33);const u={key:0};function n(e,t,a,n,r,o){return(0,l.uX)(),(0,l.CE)("div",{class:(0,s.C4)("split-content "+(a.hideAuxiliar?"split-content__single":""))},[a.hideAuxiliar?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.CE)("div",u,[(0,l.RG)(e.$slots,"auxiliar",{},void 0,!0)])),(0,l.Lk)("div",null,[(0,l.RG)(e.$slots,"default",{},void 0,!0)])],2)}var r=a(953),o={props:{hideAuxiliar:{type:Boolean,default:!1}},setup(e){const t=(0,r.KR)({});return(0,l.sV)((()=>{})),{data:t}}},i=a(6262);const d=(0,i.A)(o,[["render",n],["__scopeId","data-v-7d834eee"]]);var c=d}}]);
//# sourceMappingURL=11.035bedfd.js.map