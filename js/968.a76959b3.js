"use strict";(self["webpackChunkadmin_motosusadas_uy"]=self["webpackChunkadmin_motosusadas_uy"]||[]).push([[968],{5202:function(e,a,l){l.d(a,{A:function(){return v}});var t=l(641),s=l(33),o=l(2807),i=l(9669);function n(e,a,l,n,d,c){const u=(0,t.g2)("confirm-dialog");return(0,t.uX)(),(0,t.Wv)(u,{onConfirmed:e.removeContact,show:e.dialog,"onUpdate:show":a[1]||(a[1]=a=>e.dialog=a),position:"fixed"},{activator:(0,t.k6)((({props:l})=>[(0,t.bF)(o.D,(0,t.v6)({small:"",icon:"",class:"ml-2 pl-0 pr-0 fg-red"},l,{onClick:a[0]||(a[0]=a=>e.dialog=!0)}),{default:(0,t.k6)((()=>[(0,t.bF)(i.w,{color:"red"},{default:(0,t.k6)((()=>[(0,t.eW)("mdi-trash-can-outline")])),_:1})])),_:2},1040)])),title:(0,t.k6)((()=>[(0,t.eW)((0,s.v_)(e.t("contacts-.delete")),1)])),default:(0,t.k6)((()=>[(0,t.eW)(" "+(0,s.v_)(e.t("contacts-.delete_question")),1)])),_:1},8,["onConfirmed","show"])}var d=l(953),c=l(6255),u=l(6992),r=l(4863),m=(0,t.pM)({name:"RemoveDialogContact",components:{ConfirmDialog:r.A},props:{item:{type:Object,default:()=>({})}},setup(e,{emit:a}){const{t:l}=(0,u.s9)(),{item:t}=(0,d.QW)(e),s=(0,d.KR)(!1),o=async()=>{try{await c.A.dispatch("contacts/deleteContact",t.value.id),await c.A.dispatch("notificator/success","succeeded_operation"),a("removed")}catch(e){await c.A.dispatch("notificator/errorResponse",e)}};return{t:l,removeContact:o,dialog:s}}}),p=l(6262);const f=(0,p.A)(m,[["render",n]]);var v=f},7968:function(e,a,l){l.r(a),l.d(a,{default:function(){return Q}});var t=l(641),s=l(33),o=l(276),i=l(8995),n=l(418),d=l(5272),c=l(2162),u=l(2421),r=l(3813),m=l(6756),p=l(5526),f=l(9669),v=l(3948);const b={class:"d-md-none"},k={class:"d-none d-md-block"},_={class:"filter-title"};function h(e,a,l,h,g,y){const F=(0,t.g2)("Heading"),C=(0,t.g2)("contacts-table"),V=(0,t.g2)("SplitContent");return(0,t.uX)(),(0,t.Wv)(r.I,{fluid:"",class:"py-0"},{default:(0,t.k6)((()=>[(0,t.bF)(F,null,{title:(0,t.k6)((()=>[(0,t.Lk)("h2",null,(0,s.v_)(e.$t("contact-messages")),1),(0,t.Lk)("p",null,(0,s.v_)(e.$t("contact-messages-management")),1)])),actions:(0,t.k6)((()=>[h.unreadCount>0?((0,t.uX)(),(0,t.Wv)(i.x,{key:0,color:"primary",variant:"outlined"},{default:(0,t.k6)((()=>[(0,t.bF)(f.w,{left:""},{default:(0,t.k6)((()=>[(0,t.eW)("mdi-email")])),_:1}),(0,t.eW)(" "+(0,s.v_)(h.unreadCount)+" "+(0,s.v_)(e.$t("unread")),1)])),_:1})):(0,t.Q3)("",!0)])),_:1}),(0,t.bF)(V,{class:"mt-3"},{auxiliar:(0,t.k6)((()=>[(0,t.Lk)("div",b,[(0,t.bF)(n.$t,{variant:"accordion",modelValue:h.mobileFiltersExpanded,"onUpdate:modelValue":a[4]||(a[4]=e=>h.mobileFiltersExpanded=e)},{default:(0,t.k6)((()=>[(0,t.bF)(d.c,null,{default:(0,t.k6)((()=>[(0,t.bF)(c.w,{class:"mobile-filters-title"},{default:(0,t.k6)((()=>[(0,t.bF)(f.w,{class:"mr-2"},{default:(0,t.k6)((()=>[(0,t.eW)("mdi-filter-variant")])),_:1}),(0,t.Lk)("h4",null,(0,s.v_)(e.$t("filter-by")),1)])),_:1}),(0,t.bF)(u.T,null,{default:(0,t.k6)((()=>[(0,t.bF)(m.L,null,{default:(0,t.k6)((()=>[(0,t.bF)(p.B,{cols:"12",class:"pb-2"},{default:(0,t.k6)((()=>[(0,t.bF)(v.W,{class:"simple-search-result",variant:"outlined",label:e.$t("search"),"prepend-inner-icon":"mdi-magnify",clearable:"",modelValue:h.filters.keyword,"onUpdate:modelValue":a[0]||(a[0]=e=>h.filters.keyword=e)},null,8,["label","modelValue"])])),_:1})])),_:1}),(0,t.bF)(m.L,null,{default:(0,t.k6)((()=>[(0,t.bF)(p.B,{cols:"12",class:"py-0"},{default:(0,t.k6)((()=>[(0,t.Lk)("h5",null,(0,s.v_)(e.$t("status-filter")),1)])),_:1}),(0,t.bF)(p.B,{cols:"6",class:"pl-0"},{default:(0,t.k6)((()=>[(0,t.bF)(o.a,{modelValue:h.filters.active,"onUpdate:modelValue":a[1]||(a[1]=e=>h.filters.active=e),value:null,label:e.$t("all"),"hide-details":""},null,8,["modelValue","label"])])),_:1}),(0,t.bF)(p.B,{cols:"6",class:"pl-0"},{default:(0,t.k6)((()=>[(0,t.bF)(o.a,{modelValue:h.filters.active,"onUpdate:modelValue":a[2]||(a[2]=e=>h.filters.active=e),value:!0,label:e.$t("read"),"hide-details":""},null,8,["modelValue","label"])])),_:1}),(0,t.bF)(p.B,{cols:"6",class:"pl-0"},{default:(0,t.k6)((()=>[(0,t.bF)(o.a,{modelValue:h.filters.active,"onUpdate:modelValue":a[3]||(a[3]=e=>h.filters.active=e),value:!1,label:e.$t("unread"),"hide-details":""},null,8,["modelValue","label"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])]),(0,t.Lk)("div",k,[(0,t.bF)(m.L,null,{default:(0,t.k6)((()=>[(0,t.bF)(p.B,{cols:"12",class:"pb-2"},{default:(0,t.k6)((()=>[(0,t.bF)(v.W,{class:"simple-search-result",variant:"outlined",label:e.$t("search"),"prepend-inner-icon":"mdi-magnify",clearable:"",modelValue:h.filters.keyword,"onUpdate:modelValue":a[5]||(a[5]=e=>h.filters.keyword=e)},null,8,["label","modelValue"])])),_:1})])),_:1}),(0,t.bF)(m.L,null,{default:(0,t.k6)((()=>[(0,t.bF)(p.B,{cols:"12",class:"pb-2 pt-2"},{default:(0,t.k6)((()=>[(0,t.Lk)("h4",_,(0,s.v_)(e.$t("filter-by")),1)])),_:1})])),_:1}),(0,t.bF)(m.L,null,{default:(0,t.k6)((()=>[(0,t.bF)(p.B,{cols:"12",class:"py-0"},{default:(0,t.k6)((()=>[(0,t.Lk)("h5",null,(0,s.v_)(e.$t("status-filter")),1)])),_:1}),(0,t.bF)(p.B,{cols:"6",class:"pl-0"},{default:(0,t.k6)((()=>[(0,t.bF)(o.a,{modelValue:h.filters.active,"onUpdate:modelValue":a[6]||(a[6]=e=>h.filters.active=e),value:null,label:e.$t("all"),"hide-details":""},null,8,["modelValue","label"])])),_:1}),(0,t.bF)(p.B,{cols:"6",class:"pl-0"},{default:(0,t.k6)((()=>[(0,t.bF)(o.a,{modelValue:h.filters.active,"onUpdate:modelValue":a[7]||(a[7]=e=>h.filters.active=e),value:!0,label:e.$t("read"),"hide-details":""},null,8,["modelValue","label"])])),_:1}),(0,t.bF)(p.B,{cols:"6",class:"pl-0"},{default:(0,t.k6)((()=>[(0,t.bF)(o.a,{modelValue:h.filters.active,"onUpdate:modelValue":a[8]||(a[8]=e=>h.filters.active=e),value:!1,label:e.$t("unread"),"hide-details":""},null,8,["modelValue","label"])])),_:1})])),_:1})])])),default:(0,t.k6)((()=>[(0,t.bF)(C,{search:h.filters.keyword,active:h.filters.active,type:h.filters.type},null,8,["search","active","type"])])),_:1})])),_:1})}var g=l(953),y=l(8118),F=l(768),C=l(3751),V=l(2807);const w={class:"field-label"},W=["onClick"],$={class:"field-label"},L=["onClick"],A={class:"field-label"},R=["onClick"],P={class:"payment-buttons buttons buttons--4",style:{"white-space":"nowrap"}};function x(e,a,l,o,i,n){const d=(0,t.g2)("RemoveDialog"),c=(0,t.g2)("datatable");return(0,t.uX)(),(0,t.Wv)(m.L,{class:"payment-filters"},{default:(0,t.k6)((()=>[(0,t.bF)(p.B,{cols:"12",class:"py-0"},{default:(0,t.k6)((()=>[(0,t.bF)(c,{headers:o.headers,items:o.contacts,"items-per-page":o.itemsPerPage,"total-items":o.total,page:o.page,"onUpdate:options":o.handlePageChange,class:"v-data-table--in-row-headers",headerless:""},{"item.status":(0,t.k6)((({item:e})=>[(0,t.bF)(V.D,{small:"",icon:"",class:"status-icon",onClick:(0,C.D$)((a=>!e.read&&o.markAsRead(e.id)),["stop"])},{default:(0,t.k6)((()=>[(0,t.bF)(f.w,{color:e.read?"grey":"#1976D2",size:"20"},{default:(0,t.k6)((()=>[(0,t.eW)((0,s.v_)(e.read?"mdi-email-open-outline":"mdi-email-alert"),1)])),_:2},1032,["color"])])),_:2},1032,["onClick"])])),"item.name":(0,t.k6)((({item:a})=>[(0,t.Lk)("span",w,(0,s.v_)(e.$t("name")),1),(0,t.Lk)("span",{class:(0,s.C4)({"unread-text":!a.read}),onClick:e=>o.info(a.id)},[(0,t.eW)((0,s.v_)(a.name)+" ",1),a.read?(0,t.Q3)("",!0):((0,t.uX)(),(0,t.Wv)(f.w,{key:0,color:"#1976D2",size:"12",class:"unread-dot"},{default:(0,t.k6)((()=>[(0,t.eW)("mdi-circle")])),_:1}))],10,W)])),"item.email":(0,t.k6)((({item:a})=>[(0,t.Lk)("span",$,(0,s.v_)(e.$t("email")),1),(0,t.Lk)("span",{class:(0,s.C4)({"unread-text":!a.read}),onClick:e=>o.info(a.id)},(0,s.v_)(a.email),11,L)])),"item.subject":(0,t.k6)((({item:a})=>[(0,t.Lk)("span",A,(0,s.v_)(e.$t("subject")),1),(0,t.Lk)("span",{class:(0,s.C4)({"unread-text":!a.read}),onClick:e=>o.info(a.id)},(0,s.v_)(a.subject),11,R)])),"item.actions":(0,t.k6)((({item:e})=>[(0,t.Lk)("div",P,[(0,t.bF)(V.D,{small:"",icon:"",class:"pl-0 pr-0 fg-primary",onClick:(0,C.D$)((a=>o.info(e.id)),["stop"])},{default:(0,t.k6)((()=>[(0,t.bF)(f.w,{"max-width":"22px"},{default:(0,t.k6)((()=>[(0,t.eW)("mdi-information-outline")])),_:1})])),_:2},1032,["onClick"]),(0,t.bF)(d,{item:e,onRemoved:o.reload},null,8,["item","onRemoved"])])])),_:1},8,["headers","items","items-per-page","total-items","page","onUpdate:options"])])),_:1})])),_:1})}l(4114);var B=l(1459),U=l(9879),D=l(6278),E=l(5202),j={components:{Datatable:U.A,RemoveDialog:E.A},props:{search:{type:String,default:""},active:{type:Boolean,default:null},type:{type:String,default:null}},setup(e){const a=(0,D.Pj)(),l=(0,t.EW)((()=>a.state.contacts.contacts)),s=(0,t.EW)((()=>a.state.contacts.total)),o=(0,g.KR)(1),i=(0,g.KR)(10),n=(0,g.KR)(!1),d=async(l={})=>{if(!n.value)try{n.value=!0;const t={isRead:e.active,search:e.search||void 0,type:e.type||void 0,page:l.page||o.value,pageSize:l.itemsPerPage||i.value};await a.dispatch("contacts/loadContacts",t)}catch(t){a.dispatch("notificator/errorResponse",t)}finally{n.value=!1}},c=async e=>{o.value=e.page,i.value=e.itemsPerPage,await d(e)},u=()=>{d({page:o.value,itemsPerPage:i.value})};(0,t.wB)([()=>e.search,()=>e.active,()=>e.type],(()=>{o.value=1,d({page:o.value,itemsPerPage:i.value})}));const r=(0,g.KR)([{title:"Estado",value:"status",align:"center",sortable:!1,width:"50px"},{title:"Nombre",value:"name",align:"start",sortable:!1},{title:"Email",value:"email",align:"start",sortable:!1},{title:"Asunto",value:"subject",align:"start",sortable:!1},{title:"Acciones",value:"actions",align:"center",sortable:!1}]),m=e=>{B.A.push({name:"contact-messages-details",params:{id:e}})},p=async e=>{await a.dispatch("contacts/markAsRead",e),await u()};return{headers:r,contacts:l,info:m,markAsRead:p,reload:u,total:s,page:o,itemsPerPage:i,handlePageChange:c}}},K=l(6262);const S=(0,K.A)(j,[["render",x],["__scopeId","data-v-37ae9500"]]);var X=S,I=l(5220),z={components:{Heading:y.A,ContactsTable:X,SplitContent:F.A},setup(){const e=(0,D.Pj)(),a=(0,I.rd)(),l=(0,t.EW)((()=>e.state.contacts.unreadCount)),s=(0,g.KR)([]),o=(0,g.Kh)({keyword:"",active:null,type:null});return(0,t.sV)((async()=>{try{await e.dispatch("contacts/loadUnreadCount")}catch(a){console.error("Error loading unread count:",a)}})),{filters:o,router:a,unreadCount:l,mobileFiltersExpanded:s}}};const M=(0,K.A)(z,[["render",h],["__scopeId","data-v-0def79ea"]]);var Q=M},276:function(e,a,l){l.d(a,{a:function(){return f}});var t=l(641),s=l(61),o=l(5035),i=l(6935),n=l(2067),d=l(4587),c=l(9094),u=l(1247),r=l(7861),m=l(4600);const p=(0,d.j)({...(0,o.V)(),...(0,c.cJ)((0,s.O)(),["inline"])},"VCheckbox"),f=(0,u.RW)()({name:"VCheckbox",inheritAttrs:!1,props:p(),emits:{"update:modelValue":e=>!0,"update:focused":e=>!0},setup(e,a){let{attrs:l,slots:d}=a;const u=(0,n.q)(e,"modelValue"),{isFocused:p,focus:f,blur:v}=(0,i.i)(e),b=(0,r.v6)(),k=(0,t.EW)((()=>e.id||`checkbox-${b}`));return(0,m.C)((()=>{const[a,i]=(0,c.ph)(l),n=o.Z.filterProps(e),r=s.M.filterProps(e);return(0,t.bF)(o.Z,(0,t.v6)({class:["v-checkbox",e.class]},a,n,{modelValue:u.value,"onUpdate:modelValue":e=>u.value=e,id:k.value,focused:p.value,style:e.style}),{...d,default:e=>{let{id:a,messagesId:l,isDisabled:o,isReadonly:n}=e;return(0,t.bF)(s.M,(0,t.v6)(r,{id:a.value,"aria-describedby":l.value,disabled:o.value,readonly:n.value},i,{modelValue:u.value,"onUpdate:modelValue":e=>u.value=e,onFocus:f,onBlur:v}),d)}})})),{}}})}}]);
//# sourceMappingURL=968.a76959b3.js.map