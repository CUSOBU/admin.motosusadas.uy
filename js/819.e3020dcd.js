"use strict";(self["webpackChunkadmin_motosusadas_uy"]=self["webpackChunkadmin_motosusadas_uy"]||[]).push([[819],{2830:function(e,l,t){t.r(l),t.d(l,{default:function(){return Ke}});var a=t(641),o=t(33),n=t(3751),i=t(2586);const s=(0,i.G)("v-alert-title");var r=t(2807),c=t(7852),d=t(9669),u=t(2886),m=t(9262),p=t(2191),v=t(2542),f=t(7018),y=t(4581),g=t(5296),b=t(9788),k=t(8184),_=t(2067),h=t(3240),F=t(4663),x=t(7664),I=t(2428),w=t(953),W=t(4587),C=t(1247);const $=["success","info","warning","error"],S=(0,W.j)({border:{type:[Boolean,String],validator:e=>"boolean"===typeof e||["top","end","bottom","start"].includes(e)},borderColor:String,closable:Boolean,closeIcon:{type:y.TX,default:"$close"},closeLabel:{type:String,default:"$vuetify.close"},icon:{type:[Boolean,String,Function,Object],default:null},modelValue:{type:Boolean,default:!0},prominent:Boolean,title:String,text:String,type:{type:String,validator:e=>$.includes(e)},...(0,m.u)(),...(0,p.r)(),...(0,v.X)(),...(0,f.s)(),...(0,b.M)(),...(0,k.S)(),...(0,h.S)(),...(0,F.X)(),...(0,x.yx)(),...(0,I.gI)({variant:"flat"})},"VAlert"),L=(0,C.RW)()({name:"VAlert",props:S(),emits:{"click:close":e=>!0,"update:modelValue":e=>!0},setup(e,l){let{emit:t,slots:o}=l;const n=(0,_.q)(e,"modelValue"),i=(0,a.EW)((()=>{if(!1!==e.icon)return e.type?e.icon??`$${e.type}`:e.icon})),m=(0,a.EW)((()=>({color:e.color??e.type,variant:e.variant}))),{themeClasses:y}=(0,x.NX)(e),{colorClasses:F,colorStyles:W,variantClasses:C}=(0,I.rn)(m),{densityClasses:$}=(0,p.Q)(e),{dimensionStyles:S}=(0,v.S)(e),{elevationClasses:L}=(0,f.j)(e),{locationStyles:B}=(0,b.z)(e),{positionClasses:E}=(0,k.J)(e),{roundedClasses:A}=(0,h.v)(e),{textColorClasses:V,textColorStyles:R}=(0,u.aH)((0,w.lW)(e,"borderColor")),{t:D}=(0,g.Ym)(),X=(0,a.EW)((()=>({"aria-label":D(e.closeLabel),onClick(e){n.value=!1,t("click:close",e)}})));return()=>{const l=!(!o.prepend&&!i.value),t=!(!o.title&&!e.title),u=!(!o.close&&!e.closable);return n.value&&(0,a.bF)(e.tag,{class:["v-alert",e.border&&{"v-alert--border":!!e.border,[`v-alert--border-${!0===e.border?"start":e.border}`]:!0},{"v-alert--prominent":e.prominent},y.value,F.value,$.value,L.value,E.value,A.value,C.value,e.class],style:[W.value,S.value,B.value,e.style],role:"alert"},{default:()=>[(0,I.wN)(!1,"v-alert"),e.border&&(0,a.bF)("div",{key:"border",class:["v-alert__border",V.value],style:R.value},null),l&&(0,a.bF)("div",{key:"prepend",class:"v-alert__prepend"},[o.prepend?(0,a.bF)(c.K,{key:"prepend-defaults",disabled:!i.value,defaults:{VIcon:{density:e.density,icon:i.value,size:e.prominent?44:28}}},o.prepend):(0,a.bF)(d.w,{key:"prepend-icon",density:e.density,icon:i.value,size:e.prominent?44:28},null)]),(0,a.bF)("div",{class:"v-alert__content"},[t&&(0,a.bF)(s,{key:"title"},{default:()=>[o.title?.()??e.title]}),o.text?.()??e.text,o.default?.()]),o.append&&(0,a.bF)("div",{key:"append",class:"v-alert__append"},[o.append()]),u&&(0,a.bF)("div",{key:"close",class:"v-alert__close"},[o.close?(0,a.bF)(c.K,{key:"close-defaults",defaults:{VBtn:{icon:e.closeIcon,size:"x-small",variant:"text"}}},{default:()=>[o.close?.({props:X.value})]}):(0,a.bF)(r.D,(0,a.v6)({key:"close-btn",icon:e.closeIcon,size:"x-small",variant:"text"},X.value),null)])]})}}});var B=t(2729),E=t(3745),A=t(1772),V=t(418),R=t(5272),D=t(2162),X=t(2421),U=t(3813),z=t(6756),T=t(5526),N=t(1720),j=t(5126);const P={class:"d-flex align-center"},K={class:"d-md-none"},M={class:"d-none d-md-block"},Q={class:"fg-primary mb-1"},G={class:"text-body-2 text-medium-emphasis mb-0"},q={class:"action-buttons"},Y={class:"fg-primary"},O={class:"fg-primary"},J={class:"image-upload-section"};function H(e,l,t,i,s,c){const u=(0,a.g2)("Heading"),m=(0,a.g2)("search-motorcycles"),p=(0,a.g2)("RemoveDialog"),v=(0,a.g2)("attribute"),f=(0,a.g2)("ImageUpload"),y=(0,a.g2)("confirm-dialog"),g=(0,a.g2)("SplitContent");return(0,a.uX)(),(0,a.Wv)(U.I,{fluid:"",class:"py-0"},{default:(0,a.k6)((()=>[(0,a.bF)(u,null,{title:(0,a.k6)((()=>[(0,a.Lk)("div",P,[(0,a.bF)(r.D,{icon:"",variant:"text",onClick:i.goBack,class:"mr-2"},{default:(0,a.k6)((()=>[(0,a.bF)(d.w,null,{default:(0,a.k6)((()=>[(0,a.eW)("mdi-arrow-left")])),_:1})])),_:1},8,["onClick"]),(0,a.Lk)("div",null,[(0,a.Lk)("h2",null,(0,o.v_)(e.$t("motorcycles-.details")),1),(0,a.Lk)("p",null,(0,o.v_)(e.$t("motorcycles-.details-sub-heading")),1)])])])),actions:(0,a.k6)((()=>[(0,a.eW)("Â  ")])),_:1}),(0,a.bo)((0,a.bF)(g,{"hide-auxiliar":!i.motorcycle},{auxiliar:(0,a.k6)((()=>[(0,a.Lk)("div",K,[(0,a.bF)(V.$t,{variant:"accordion",modelValue:i.mobileSearchExpanded,"onUpdate:modelValue":l[0]||(l[0]=e=>i.mobileSearchExpanded=e)},{default:(0,a.k6)((()=>[(0,a.bF)(R.c,null,{default:(0,a.k6)((()=>[(0,a.bF)(D.w,{class:"mobile-search-title"},{default:(0,a.k6)((()=>[(0,a.bF)(d.w,{class:"mr-2"},{default:(0,a.k6)((()=>[(0,a.eW)("mdi-magnify")])),_:1}),(0,a.Lk)("h4",null,(0,o.v_)(e.$t("search")),1)])),_:1}),(0,a.bF)(X.T,null,{default:(0,a.k6)((()=>[(0,a.bF)(m)])),_:1})])),_:1})])),_:1},8,["modelValue"])]),(0,a.Lk)("div",M,[(0,a.bF)(m)])])),default:(0,a.k6)((()=>[(0,a.bF)(U.I,{fluid:""},{default:(0,a.k6)((()=>[i.motorcycle?((0,a.uX)(),(0,a.Wv)(z.L,{key:0},{default:(0,a.k6)((()=>[(0,a.bF)(T.B,{cols:"12",md:"10"},{default:(0,a.k6)((()=>[(0,a.Lk)("h4",Q,(0,o.v_)(i.motorcycle.brandName)+" "+(0,o.v_)(i.motorcycle.modelName),1),(0,a.Lk)("p",G,(0,o.v_)(i.motorcycle.name),1)])),_:1}),(0,a.bF)(T.B,{cols:"12",md:"2",class:"action-buttons-container"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",q,[i.canEdit?((0,a.uX)(),(0,a.Wv)(r.D,{key:0,small:"",text:"",class:"fg-blue",onClick:l[1]||(l[1]=e=>i.motorcycle&&i.edit(i.motorcycle.id))},{default:(0,a.k6)((()=>[(0,a.bF)(d.w,{small:""},{default:(0,a.k6)((()=>[(0,a.eW)("mdi-pencil")])),_:1}),(0,a.eW)(" "+(0,o.v_)(e.$t("edit")),1)])),_:1})):(0,a.Q3)("",!0),i.canDelete?((0,a.uX)(),(0,a.Wv)(r.D,{key:1,small:"",text:"",class:"fg-red",onClick:l[2]||(l[2]=e=>i.dialogVisible=!0)},{default:(0,a.k6)((()=>[(0,a.bF)(d.w,{small:""},{default:(0,a.k6)((()=>[(0,a.eW)("mdi-delete")])),_:1}),(0,a.eW)(" "+(0,o.v_)(e.$t("delete")),1)])),_:1})):(0,a.Q3)("",!0)])])),_:1})])),_:1})):(0,a.Q3)("",!0),(0,a.bF)(p,{item:i.motorcycle,show:i.dialogVisible,onRemoved:i.onRemoved,"onUpdate:show":l[3]||(l[3]=e=>i.dialogVisible=e)},null,8,["item","show","onRemoved"]),(0,a.bF)(z.L,null,{default:(0,a.k6)((()=>[(0,a.bF)(T.B,null,{default:(0,a.k6)((()=>[(0,a.Lk)("h4",Y,(0,o.v_)(e.$t("basic-info")),1)])),_:1})])),_:1}),i.motorcycle?((0,a.uX)(),(0,a.Wv)(z.L,{key:1,class:"bottom-lined info-grid"},{default:(0,a.k6)((()=>[(0,a.bF)(T.B,{cols:"6",md:"4"},{default:(0,a.k6)((()=>[(0,a.bF)(v,null,{name:(0,a.k6)((()=>[(0,a.eW)((0,o.v_)(e.$t("brand")),1)])),default:(0,a.k6)((()=>[(0,a.eW)(" "+(0,o.v_)(i.motorcycle.brandName),1)])),_:1})])),_:1}),(0,a.bF)(T.B,{cols:"6",md:"4"},{default:(0,a.k6)((()=>[(0,a.bF)(v,null,{name:(0,a.k6)((()=>[(0,a.eW)((0,o.v_)(e.$t("model")),1)])),default:(0,a.k6)((()=>[(0,a.eW)(" "+(0,o.v_)(i.motorcycle.modelName),1)])),_:1})])),_:1}),(0,a.bF)(T.B,{cols:"6",md:"4"},{default:(0,a.k6)((()=>[(0,a.bF)(v,null,{name:(0,a.k6)((()=>[(0,a.eW)((0,o.v_)(e.$t("type")),1)])),default:(0,a.k6)((()=>[(0,a.eW)(" "+(0,o.v_)(i.motorcycle.typeName),1)])),_:1})])),_:1}),(0,a.bF)(T.B,{cols:"6",md:"4"},{default:(0,a.k6)((()=>[(0,a.bF)(v,null,{name:(0,a.k6)((()=>[(0,a.eW)((0,o.v_)(e.$t("location")),1)])),default:(0,a.k6)((()=>[(0,a.eW)(" "+(0,o.v_)(i.motorcycle.locationName),1)])),_:1})])),_:1}),(0,a.bF)(T.B,{cols:"6",md:"4"},{default:(0,a.k6)((()=>[(0,a.bF)(v,null,{name:(0,a.k6)((()=>[(0,a.eW)((0,o.v_)(e.$t("year")),1)])),default:(0,a.k6)((()=>[(0,a.eW)(" "+(0,o.v_)(i.motorcycle.year),1)])),_:1})])),_:1}),(0,a.bF)(T.B,{cols:"6",md:"4"},{default:(0,a.k6)((()=>[(0,a.bF)(v,null,{name:(0,a.k6)((()=>[(0,a.eW)((0,o.v_)(e.$t("price")),1)])),default:(0,a.k6)((()=>[(0,a.eW)(" "+(0,o.v_)(i.formatPrice(i.motorcycle.price)),1)])),_:1})])),_:1}),(0,a.bF)(T.B,{cols:"6",md:"4"},{default:(0,a.k6)((()=>[(0,a.bF)(v,null,{name:(0,a.k6)((()=>[(0,a.eW)((0,o.v_)(e.$t("cubic-capacity")),1)])),default:(0,a.k6)((()=>[(0,a.eW)(" "+(0,o.v_)(i.motorcycle.cubicCapacity)+" cc ",1)])),_:1})])),_:1}),(0,a.bF)(T.B,{cols:"6",md:"4"},{default:(0,a.k6)((()=>[(0,a.bF)(v,null,{name:(0,a.k6)((()=>[(0,a.eW)((0,o.v_)(e.$t("kms")),1)])),default:(0,a.k6)((()=>[(0,a.eW)(" "+(0,o.v_)(i.formatNumber(i.motorcycle.kms))+" km ",1)])),_:1})])),_:1}),(0,a.bF)(T.B,{cols:"6",md:"4"},{default:(0,a.k6)((()=>[(0,a.bF)(v,null,{name:(0,a.k6)((()=>[(0,a.eW)((0,o.v_)(e.$t("views")),1)])),default:(0,a.k6)((()=>[(0,a.eW)(" "+(0,o.v_)(i.motorcycle.views),1)])),_:1})])),_:1}),(0,a.bF)(T.B,{cols:"6",md:"4"},{default:(0,a.k6)((()=>[(0,a.bF)(v,null,{name:(0,a.k6)((()=>[(0,a.eW)((0,o.v_)(e.$t("active")),1)])),default:(0,a.k6)((()=>[(0,a.eW)(" "+(0,o.v_)(i.motorcycle.active?e.$t("yes"):e.$t("no")),1)])),_:1})])),_:1}),i.motorcycle.agencyName?((0,a.uX)(),(0,a.Wv)(T.B,{key:0,cols:"6",md:"4"},{default:(0,a.k6)((()=>[(0,a.bF)(v,null,{name:(0,a.k6)((()=>[(0,a.eW)((0,o.v_)(e.$t("agency")),1)])),default:(0,a.k6)((()=>[(0,a.eW)(" "+(0,o.v_)(i.motorcycle.agencyName),1)])),_:1})])),_:1})):(0,a.Q3)("",!0)])),_:1})):(0,a.Q3)("",!0),i.motorcycle?((0,a.uX)(),(0,a.Wv)(z.L,{key:2},{default:(0,a.k6)((()=>[(0,a.bF)(T.B,null,{default:(0,a.k6)((()=>[(0,a.Lk)("h4",O,(0,o.v_)(e.$t("images")),1)])),_:1})])),_:1})):(0,a.Q3)("",!0),i.motorcycle&&(i.canEdit||i.canDelete)?((0,a.uX)(),(0,a.Wv)(z.L,{key:3},{default:(0,a.k6)((()=>[(0,a.bF)(T.B,{cols:"12"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",J,[(0,a.bF)(f,{entityId:i.motorcycle.id,service:i.motorcycleImageService,"store-module":"motorcycles","fetch-action":"loadMotorcycle","section-title":e.$t("add-image"),"section-description":e.$t("upload-images-description"),multiple:!0,onImageUploaded:i.onImagesUploaded},null,8,["entityId","service","section-title","section-description","onImageUploaded"])])])),_:1})])),_:1})):(0,a.Q3)("",!0),i.motorcycle&&i.motorcycle.images&&i.motorcycle.images.length>0?((0,a.uX)(),(0,a.Wv)(z.L,{key:4},{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.motorcycle.images,(t=>((0,a.uX)(),(0,a.Wv)(T.B,{cols:"12",md:"4",key:t.id},{default:(0,a.k6)((()=>[(0,a.bF)(B.J,{class:"image-card"},{default:(0,a.k6)((()=>[(0,a.bF)(j.y,{src:t.url?t.url:i.buildImageUrl(t.path),"aspect-ratio":"1.5",cover:"",class:"rounded",onClick:e=>i.openPreview(t.url?t.url:i.buildImageUrl(t.path))},null,8,["src","onClick"]),i.canEdit||i.canDelete?((0,a.uX)(),(0,a.Wv)(E.S,{key:0},{default:(0,a.k6)((()=>[(0,a.bF)(N.h),(0,a.bF)(y,{modelValue:i.deleteImageDialog,"onUpdate:modelValue":l[4]||(l[4]=e=>i.deleteImageDialog=e),onConfirmed:i.executeDeleteImage},{activator:(0,a.k6)((()=>[(0,a.bF)(r.D,{color:"error",variant:"text",size:"small",onClick:e=>i.confirmDeleteImage(t.id),loading:i.deletingImageId===t.id},{default:(0,a.k6)((()=>[(0,a.bF)(d.w,null,{default:(0,a.k6)((()=>[(0,a.eW)("mdi-delete")])),_:1}),(0,a.eW)(" "+(0,o.v_)(e.$t("delete")),1)])),_:2},1032,["onClick","loading"])])),title:(0,a.k6)((()=>[(0,a.eW)((0,o.v_)(e.$t("confirm-delete-image")),1)])),default:(0,a.k6)((()=>[(0,a.eW)(" "+(0,o.v_)(e.$t("confirm-delete-image")),1)])),_:2},1032,["modelValue","onConfirmed"])])),_:2},1024)):(0,a.Q3)("",!0)])),_:2},1024)])),_:2},1024)))),128))])),_:1})):i.motorcycle?((0,a.uX)(),(0,a.Wv)(z.L,{key:5},{default:(0,a.k6)((()=>[(0,a.bF)(T.B,{cols:"12"},{default:(0,a.k6)((()=>[(0,a.bF)(L,{type:"info",variant:"tonal"},{default:(0,a.k6)((()=>[(0,a.eW)((0,o.v_)(e.$t("no-images-yet")),1)])),_:1})])),_:1})])),_:1})):(0,a.Q3)("",!0),(0,a.bF)(A.p,{modelValue:i.previewDialog,"onUpdate:modelValue":l[6]||(l[6]=e=>i.previewDialog=e),"max-width":"800px"},{default:(0,a.k6)((()=>[(0,a.bF)(B.J,null,{default:(0,a.k6)((()=>[(0,a.bF)(j.y,{src:i.previewImageUrl,"aspect-ratio":"16/9",cover:""},null,8,["src"]),(0,a.bF)(E.S,null,{default:(0,a.k6)((()=>[(0,a.bF)(N.h),(0,a.bF)(r.D,{text:"",onClick:l[5]||(l[5]=e=>i.previewDialog=!1)},{default:(0,a.k6)((()=>[(0,a.eW)((0,o.v_)(e.$t("close")),1)])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["hide-auxiliar"]),[[n.aG,!i.isLoading]])])),_:1})}t(4114),t(6984),t(7566),t(8721);var Z=t(6278),ee=t(8118),le=t(768),te=t(4078),ae=t(5220),oe=t(8370),ne=t(5368),ie=t(8309),se=t(9638),re=t(1114),ce=t(8987);const de="https://motosusadas.com.uy/api".replace(/\/$/,"");class ue extends Error{constructor(...e){super(...e),(0,re.A)(this,"status",void 0),(0,re.A)(this,"data",void 0)}}async function me(e,l={}){const t=ce.A.get("auth-token"),a={...l.headers||{}};l.body instanceof FormData||(a["Content-Type"]="application/json"),t&&(a["Authorization"]=`Bearer ${t}`);const o=await fetch(`${de}${e}`,{...l,headers:a});if(!o.ok){const e=new ue("API error");e.status=o.status;try{const l=await o.text();try{e.data=JSON.parse(l)}catch{e.data=l}}catch(n){e.data="Unable to read error response"}throw e}return 204===o.status?null:o.json()}function pe(e){const l=[".jpg",".jpeg",".png",".webp"],t=5242880,a=e.name.toLowerCase(),o=l.some((e=>a.endsWith(e)));return o?e.size>t?{valid:!1,error:`El archivo excede el tamaÃ±o mÃ¡ximo permitido (5MB). TamaÃ±o actual: ${(e.size/1024/1024).toFixed(2)}MB`}:{valid:!0}:{valid:!1,error:`Formato no permitido. Extensiones vÃ¡lidas: ${l.join(", ")}`}}class ve{async uploadImages(e,l){for(const a of l){const e=pe(a);if(!e.valid)throw new Error(e.error)}const t=new FormData;return l.forEach((e=>{t.append("images",e)})),me(`/api/motorcycles/${e}/images`,{method:"POST",body:t})}async uploadImage(e,l){return this.uploadImages(e,[l])}async deleteImage(e,l){return me(`/api/motorcycles/${e}/images/${l}`,{method:"DELETE"})}async removeImage(e,l){if(!l)throw new Error("Image ID is required to delete");return this.deleteImage(e,l)}}var fe=new ve,ye=t(4863);const ge={class:"image-upload"},be={class:"image-section"},ke={class:"section-title"},_e={class:"section-description"},he={key:0,class:"current-image-container"},Fe={class:"image-preview"},xe=["src","alt"],Ie={class:"image-overlay"},we={class:"upload-section"},We={key:0,class:"file-selected"},Ce={class:"file-info"},$e={class:"file-name"},Se={key:0,class:"file-more"},Le={class:"file-size"},Be={class:"upload-buttons"},Ee={class:"select-image-text"},Ae=["multiple"];function Ve(e,l,t,n,i,s){return(0,a.uX)(),(0,a.CE)("div",ge,[(0,a.Lk)("div",be,[(0,a.Lk)("h5",ke,(0,o.v_)(e.sectionTitle),1),(0,a.Lk)("p",_e,(0,o.v_)(e.sectionDescription),1),e.currentImageUrl?((0,a.uX)(),(0,a.CE)("div",he,[(0,a.Lk)("div",Fe,[(0,a.Lk)("img",{src:e.currentImageUrl,alt:e.sectionTitle,class:"uploaded-image"},null,8,xe),(0,a.Lk)("div",Ie,[(0,a.bF)(r.D,{size:"small",color:"error",class:"remove-btn",onClick:e.removeImage,loading:e.isRemoving},{default:(0,a.k6)((()=>[(0,a.bF)(d.w,null,{default:(0,a.k6)((()=>[(0,a.eW)("mdi-delete")])),_:1})])),_:1},8,["onClick","loading"])])])])):(0,a.Q3)("",!0),(0,a.Lk)("div",we,[e.selectedFiles&&e.selectedFiles.length?((0,a.uX)(),(0,a.CE)("div",We,[(0,a.Lk)("div",Ce,[(0,a.bF)(d.w,{color:"primary"},{default:(0,a.k6)((()=>[(0,a.eW)("mdi-file-image")])),_:1}),(0,a.Lk)("span",$e,(0,o.v_)(e.selectedFiles[0].name),1),e.selectedFiles.length>1?((0,a.uX)(),(0,a.CE)("span",Se,"+"+(0,o.v_)(e.selectedFiles.length-1),1)):(0,a.Q3)("",!0),(0,a.Lk)("span",Le,"("+(0,o.v_)(e.formatFileSize(e.selectedFiles[0].size))+")",1)]),(0,a.bF)(r.D,{size:"small",variant:"text",onClick:e.clearSelection},{default:(0,a.k6)((()=>[(0,a.bF)(d.w,null,{default:(0,a.k6)((()=>[(0,a.eW)("mdi-close")])),_:1})])),_:1},8,["onClick"])])):(0,a.Q3)("",!0),(0,a.Lk)("div",Be,[(0,a.bF)(r.D,{variant:"outlined",color:"primary","prepend-icon":"mdi-paperclip",onClick:e.triggerFileInput,disabled:e.isUploading,class:"select-image-btn"},{default:(0,a.k6)((()=>[(0,a.Lk)("span",Ee,(0,o.v_)(e.$t("select-image")),1)])),_:1},8,["onClick","disabled"]),e.selectedFiles&&e.selectedFiles.length?((0,a.uX)(),(0,a.Wv)(r.D,{key:0,color:"primary",onClick:e.uploadImage,loading:e.isUploading},{default:(0,a.k6)((()=>[(0,a.eW)((0,o.v_)(e.multiple?e.$t("upload-images"):e.$t("upload-image")),1)])),_:1},8,["onClick","loading"])):(0,a.Q3)("",!0)]),(0,a.Lk)("input",{ref:"fileInput",type:"file",multiple:e.multiple,accept:"image/*",style:{display:"none"},onChange:l[0]||(l[0]=(...l)=>e.onFileSelected&&e.onFileSelected(...l))},null,40,Ae)])])])}var Re=t(6992);function De(e,l={}){const{maxSize:t=5242880,allowedTypes:a=["image/"]}=l,o=a.some((l=>l.endsWith("/")?e.type.startsWith(l):e.type===l));return o?e.size>t?{isValid:!1,error:"file-too-large"}:{isValid:!0}:{isValid:!1,error:"invalid-file-type"}}function Xe(e){if(0===e)return"0 Bytes";const l=1024,t=["Bytes","KB","MB","GB"],a=Math.floor(Math.log(e)/Math.log(l));return parseFloat((e/Math.pow(l,a)).toFixed(2))+" "+t[a]}var Ue=(0,a.pM)({name:"ImageUpload",props:{entityId:{type:String,required:!0},sectionTitle:{type:String,required:!0},sectionDescription:{type:String,required:!0},currentImageUrl:{type:String,default:null},service:{type:Object,required:!0},storeModule:{type:String,required:!0},fetchAction:{type:String,required:!0},maxSize:{type:Number,default:10485760},allowedTypes:{type:Array,default:()=>["image/jpeg","image/jpg","image/png","image/gif","image/webp"]},multiple:{type:Boolean,default:!1}},emits:["image-uploaded","image-removed"],setup(e,{emit:l}){const{t:t}=(0,Re.s9)(),a=(0,Z.Pj)(),o=(0,w.KR)(null),n=(0,w.KR)([]),i=(0,w.KR)(!1),s=(0,w.KR)(!1),r=()=>{o.value?.click()},c=l=>{const o=l.target,i=o.files?Array.from(o.files):[];if(i.length){for(const l of i){const o=De(l,{maxSize:e.maxSize,allowedTypes:e.allowedTypes});if(!o.isValid)return void a.dispatch("notificator/error",t(o.error))}n.value=i}},d=()=>{n.value=[],o.value&&(o.value.value="")},u=async()=>{if(n.value&&0!==n.value.length&&e.entityId)try{i.value=!0,e.multiple?await e.service.uploadImages(e.entityId,n.value):await e.service.uploadImage(e.entityId,n.value[0]);const o=await a.dispatch(`${e.storeModule}/${e.fetchAction}`,e.entityId);a.dispatch("notificator/success",t("image-uploaded-successfully")),l("image-uploaded",o),d()}catch(o){a.dispatch("notificator/errorResponse",o)}finally{i.value=!1}},m=async()=>{if(e.entityId)try{s.value=!0,await e.service.removeImage(e.entityId),await a.dispatch(`${e.storeModule}/${e.fetchAction}`,e.entityId),a.dispatch("notificator/success",t("image-removed-successfully")),l("image-removed")}catch(o){a.dispatch("notificator/errorResponse",o)}finally{s.value=!1}};return{fileInput:o,selectedFiles:n,isUploading:i,isRemoving:s,triggerFileInput:r,onFileSelected:c,clearSelection:d,uploadImage:u,removeImage:m,formatFileSize:Xe,t:t}}}),ze=t(6262);const Te=(0,ze.A)(Ue,[["render",Ve],["__scopeId","data-v-9dc2585c"]]);var Ne=Te,je={components:{Heading:ee.A,SplitContent:le.A,searchMotorcycles:te.A,Attribute:oe.A,RemoveDialog:ne.A,ConfirmDialog:ye.A,ImageUpload:Ne},setup(){const e=(0,ae.rd)(),l=(0,ae.lq)(),t=(0,Z.Pj)(),o=(0,w.KR)(!0),n=(0,w.KR)(null),i=(0,w.KR)(!1),s=(0,w.KR)([]),r=(0,a.EW)((()=>t.getters["auth/currentUser"])),c=(0,a.EW)((()=>r.value?.authLevel===se.A.Admin)),d=(0,w.KR)(null),u=(0,w.KR)(!1),m=(0,w.KR)(null),p=(0,w.KR)(!1),v=(0,w.KR)(null),f=(0,a.EW)((()=>!!n.value&&(!!c.value||n.value.agencyId===r.value?.agencyId))),y=(0,a.EW)((()=>!!n.value&&(!!c.value||n.value.agencyId===r.value?.agencyId))),g=async e=>{try{o.value=!0;const l=await t.dispatch("motorcycles/loadMotorcycle",e);n.value=l}catch(l){t.dispatch("notificator/errorResponse",l),n.value=null}finally{o.value=!1}};(0,a.wB)((()=>l.params.id),(async e=>{"string"===typeof e&&await g(e)}),{immediate:!0});const b=l=>{e.push({name:"motorcycles-edit",params:{id:l}})},k=()=>{e.push({name:"motorcycles"})},_=()=>{i.value=!1,e.push({name:"motorcycles"})},h=e=>new Intl.NumberFormat("es-UY",{style:"currency",currency:"UYU"}).format(e),F=e=>new Intl.NumberFormat("es-UY").format(e),x=async()=>{n.value&&await g(n.value.id)},I=e=>{m.value=e,u.value=!0},W=async()=>{if(n.value&&m.value)try{d.value=m.value,await fe.deleteImage(n.value.id,m.value),await g(n.value.id),t.dispatch("notificator/success",ie.A.global.t("image-deleted-successfully"))}catch(e){t.dispatch("notificator/errorResponse",e)}finally{d.value=null,m.value=null}},C=e=>{if(!e)return"";try{const l=window.location.origin;return e.startsWith("http://")||e.startsWith("https://")?e:`${l.replace(/\/$/,"")}/api/files/${e}`}catch(l){return`/api/files/${e}`}},$=e=>{v.value=e,p.value=!0};return{motorcycle:n,isLoading:o,dialogVisible:i,edit:b,goBack:k,onRemoved:_,formatPrice:h,formatNumber:F,canEdit:f,canDelete:y,mobileSearchExpanded:s,deletingImageId:d,confirmDeleteImage:I,executeDeleteImage:W,buildImageUrl:C,motorcycleImageService:fe,deleteImageDialog:u,imageToDelete:m,previewDialog:p,previewImageUrl:v,openPreview:$,onImagesUploaded:x}}};const Pe=(0,ze.A)(je,[["render",H],["__scopeId","data-v-fcabed76"]]);var Ke=Pe},5368:function(e,l,t){t.d(l,{A:function(){return u}});var a=t(641),o=t(33);function n(e,l,t,n,i,s){const r=(0,a.g2)("confirm-dialog");return(0,a.uX)(),(0,a.Wv)(r,{"model-value":t.show,"onUpdate:modelValue":l[0]||(l[0]=l=>e.$emit("update:show",l)),onConfirmed:n.remove},{title:(0,a.k6)((()=>[(0,a.eW)((0,o.v_)(e.$t("delete-motorcycle")),1)])),default:(0,a.k6)((()=>[(0,a.eW)(" "+(0,o.v_)(e.$t("delete-motorcycle-confirmation",{name:t.item?t.item.name:"-"})),1)])),_:1},8,["model-value","onConfirmed"])}var i=t(6278),s=t(4863),r={components:{ConfirmDialog:s.A},props:{item:{type:Object,required:!1,default:null},show:{type:Boolean,default:!1}},emits:["removed","update:show"],setup(e,{emit:l}){const t=(0,i.Pj)(),a=async()=>{try{await t.dispatch("motorcycles/deleteMotorcycle",e.item.id),await t.dispatch("notificator/success","motorcycle-deleted-success"),l("removed"),l("update:show",!1)}catch(a){await t.dispatch("notificator/errorResponse",a)}};return{remove:a}}},c=t(6262);const d=(0,c.A)(r,[["render",n]]);var u=d},4078:function(e,l,t){t.d(l,{A:function(){return _}});var a=t(641),o=t(33),n=t(6756),i=t(5526),s=t(2164),r=t(7254),c=t(7294),d=t(7505),u=t(3948);const m={class:"text--primary"};function p(e,l,t,p,v,f){return(0,a.uX)(),(0,a.Wv)(n.L,null,{default:(0,a.k6)((()=>[(0,a.bF)(i.B,null,{default:(0,a.k6)((()=>[(0,a.bF)(n.L,null,{default:(0,a.k6)((()=>[(0,a.bF)(i.B,{class:"mt-2"},{default:(0,a.k6)((()=>[(0,a.bF)(u.W,{dense:"","hide-details":"",modelValue:p.search,"onUpdate:modelValue":l[0]||(l[0]=e=>p.search=e),variant:"outlined",label:e.$t("search")},null,8,["modelValue","label"])])),_:1})])),_:1}),(0,a.bF)(n.L,null,{default:(0,a.k6)((()=>[(0,a.bF)(i.B,{class:"py-0"},{default:(0,a.k6)((()=>[(0,a.bF)(s.x,{class:"v-list-search-result"},{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(p.filteredMotorcycles,((e,l)=>((0,a.uX)(),(0,a.Wv)(r.g,{key:l,color:"primary",onClick:e=>p.selectedItem=l,selected:p.selectedItem===l},{default:(0,a.k6)((()=>[(0,a.bF)(c.U,null,{default:(0,a.k6)((()=>[(0,a.eW)((0,o.v_)(e.brandName)+" "+(0,o.v_)(e.modelName),1)])),_:2},1024),(0,a.bF)(d.w,null,{default:(0,a.k6)((()=>[(0,a.Lk)("span",m,(0,o.v_)(e.name),1),(0,a.eW)(" - "+(0,o.v_)(e.year),1)])),_:2},1024)])),_:2},1032,["onClick","selected"])))),128))])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}t(4114);var v=t(5220),f=t(953),y=t(6278),g={name:"SearchMotorcycles",setup(){const e=(0,v.rd)(),l=(0,v.lq)(),t=(0,y.Pj)(),o=(0,f.KR)(null),n=(0,f.KR)(""),i=(0,f.KR)(null),s=(0,a.EW)((()=>t.state.motorcycles.motorcycles||[])),r=(0,a.EW)((()=>{if(!n.value)return s.value;const e=n.value.toLowerCase();return s.value.filter((l=>l.name&&l.name.toLowerCase().includes(e)||l.brandName&&l.brandName.toLowerCase().includes(e)||l.modelName&&l.modelName.toLowerCase().includes(e)))}));(0,a.wB)(n,(async()=>{o.value&&clearTimeout(o.value),o.value=window.setTimeout((function(){c()}),1e3)})),(0,a.wB)(i,(async l=>{let t="motorcycles-edit";"motorcycles-details"===e.currentRoute.value.name&&(t="motorcycles-details"),null!==i.value&&r.value[i.value]&&e.push({name:t,params:{id:r.value[i.value].id}})}));const c=async()=>{try{const e={search:n.value||null,page:1,pageSize:20};await t.dispatch("motorcycles/loadMotorcycles",e)}catch(e){t.dispatch("notificator/errorResponse",e)}};return(0,a.sV)((async()=>{if(await c(),r.value){const e=r.value.findIndex((e=>e.id===l.params.id));-1!==e&&(i.value=e)}})),{search:n,filteredMotorcycles:r,selectedItem:i}}},b=t(6262);const k=(0,b.A)(g,[["render",p],["__scopeId","data-v-5e63e1d6"]]);var _=k},8370:function(e,l,t){t.d(l,{A:function(){return c}});var a=t(641);const o={class:"attribute"};function n(e,l,t,n,i,s){return(0,a.uX)(),(0,a.CE)("div",o,[(0,a.Lk)("div",null,[(0,a.RG)(e.$slots,"name",{},void 0,!0)]),(0,a.Lk)("div",null,[(0,a.RG)(e.$slots,"default",{},void 0,!0)])])}var i={setup(){return(0,a.sV)((()=>{})),{}}},s=t(6262);const r=(0,s.A)(i,[["render",n],["__scopeId","data-v-5e7806b8"]]);var c=r},8118:function(e,l,t){t.d(l,{A:function(){return y}});var a=t(641),o=t(33),n=t(2807),i=t(6756),s=t(5526),r=t(9669);const c={class:"heading-container"};function d(e,l,t,d,u,m){return(0,a.uX)(),(0,a.CE)("div",c,[(0,a.bF)(i.L,{class:"mt-5"},{default:(0,a.k6)((()=>[(0,a.bF)(s.B,{cols:"8",sm:"4",class:"heading-title"},{default:(0,a.k6)((()=>[(0,a.RG)(e.$slots,"title",{},(()=>[(0,a.Lk)("h2",null,(0,o.v_)(e.$t("dashboard")),1),(0,a.Lk)("p",null,(0,o.v_)(e.$t("dashboard-welcome")),1)]),!0)])),_:3}),(0,a.bF)(s.B,{cols:"4",sm:"8",class:"heading-actions"},{default:(0,a.k6)((()=>[(0,a.RG)(e.$slots,"actions",{},void 0,!0),d.lgAndUp?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.Wv)(n.D,{key:0,text:"",dark:"",class:"action-btn",onClick:d.toggleDrawer},{default:(0,a.k6)((()=>[(0,a.bF)(r.w,{color:"#2d6283"},{default:(0,a.k6)((()=>[(0,a.eW)("mdi-menu")])),_:1})])),_:1},8,["onClick"]))])),_:3})])),_:3})])}var u=t(6278),m=t(8353),p={setup(){const{lgAndUp:e}=(0,m._F)(),l=(0,u.Pj)(),t=()=>{l.commit("toggleDrawer")};return{lgAndUp:e,toggleDrawer:t}}},v=t(6262);const f=(0,v.A)(p,[["render",d],["__scopeId","data-v-6ab045b7"]]);var y=f},768:function(e,l,t){t.d(l,{A:function(){return u}});var a=t(641),o=t(33);const n={key:0};function i(e,l,t,i,s,r){return(0,a.uX)(),(0,a.CE)("div",{class:(0,o.C4)("split-content "+(t.hideAuxiliar?"split-content__single":""))},[t.hideAuxiliar?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("div",n,[(0,a.RG)(e.$slots,"auxiliar",{},void 0,!0)])),(0,a.Lk)("div",null,[(0,a.RG)(e.$slots,"default",{},void 0,!0)])],2)}var s=t(953),r={props:{hideAuxiliar:{type:Boolean,default:!1}},setup(e){const l=(0,s.KR)({});return(0,a.sV)((()=>{})),{data:l}}},c=t(6262);const d=(0,c.A)(r,[["render",i],["__scopeId","data-v-7d834eee"]]);var u=d},5272:function(e,l,t){t.d(l,{c:function(){return _}});t(4114);var a=t(641),o=t(418),n=t(2421),i=t(2162),s=t(2886),r=t(9262),c=t(2858),d=t(7018),u=t(4690),m=t(8139),p=t(3240),v=t(4663),f=t(953),y=t(4587),g=t(1247),b=t(4600);const k=(0,y.j)({title:String,text:String,bgColor:String,...(0,r.u)(),...(0,d.s)(),...(0,u.TX)(),...(0,m.f)(),...(0,p.S)(),...(0,v.X)(),...(0,i.G)()},"VExpansionPanel"),_=(0,g.RW)()({name:"VExpansionPanel",props:k(),emits:{"group:selected":e=>!0},setup(e,l){let{slots:t}=l;const r=(0,u.aO)(e,o.Yz),{backgroundColorClasses:m,backgroundColorStyles:v}=(0,s.z6)(e,"bgColor"),{elevationClasses:y}=(0,d.j)(e),{roundedClasses:g}=(0,p.v)(e),k=(0,a.EW)((()=>r?.disabled.value||e.disabled)),_=(0,a.EW)((()=>r.group.items.value.reduce(((e,l,t)=>(r.group.selected.value.includes(l.id)&&e.push(t),e)),[]))),h=(0,a.EW)((()=>{const e=r.group.items.value.findIndex((e=>e.id===r.id));return!r.isSelected.value&&_.value.some((l=>l-e===1))})),F=(0,a.EW)((()=>{const e=r.group.items.value.findIndex((e=>e.id===r.id));return!r.isSelected.value&&_.value.some((l=>l-e===-1))}));return(0,a.Gt)(o.Yz,r),(0,c.Uh)({VExpansionPanelText:{eager:(0,f.lW)(e,"eager")},VExpansionPanelTitle:{readonly:(0,f.lW)(e,"readonly")}}),(0,b.C)((()=>{const l=!(!t.text&&!e.text),o=!(!t.title&&!e.title);return(0,a.bF)(e.tag,{class:["v-expansion-panel",{"v-expansion-panel--active":r.isSelected.value,"v-expansion-panel--before-active":h.value,"v-expansion-panel--after-active":F.value,"v-expansion-panel--disabled":k.value},g.value,m.value,e.class],style:[v.value,e.style]},{default:()=>[(0,a.bF)("div",{class:["v-expansion-panel__shadow",...y.value]},null),o&&(0,a.bF)(i.w,{key:"title",collapseIcon:e.collapseIcon,color:e.color,expandIcon:e.expandIcon,hideActions:e.hideActions,ripple:e.ripple},{default:()=>[t.title?t.title():e.title]}),l&&(0,a.bF)(n.T,{key:"text"},{default:()=>[t.text?t.text():e.text]}),t.default?.()]})})),{}}})},2421:function(e,l,t){t.d(l,{T:function(){return p}});var a=t(641),o=t(3751),n=t(418),i=t(9562),s=t(9262),r=t(8139),c=t(4587),d=t(1247),u=t(4600);const m=(0,c.j)({...(0,s.u)(),...(0,r.f)()},"VExpansionPanelText"),p=(0,d.RW)()({name:"VExpansionPanelText",props:m(),setup(e,l){let{slots:t}=l;const s=(0,a.WQ)(n.Yz);if(!s)throw new Error("[Vuetify] v-expansion-panel-text needs to be placed inside v-expansion-panel");const{hasContent:c,onAfterLeave:d}=(0,r._)(e,s.isSelected);return(0,u.C)((()=>(0,a.bF)(i.Qo,{onAfterLeave:d},{default:()=>[(0,a.bo)((0,a.bF)("div",{class:["v-expansion-panel-text",e.class],style:e.style},[t.default&&c.value&&(0,a.bF)("div",{class:"v-expansion-panel-text__wrapper"},[t.default?.()])]),[[o.aG,s.isSelected.value]])]}))),{}}})},2162:function(e,l,t){t.d(l,{G:function(){return p},w:function(){return v}});var a=t(641),o=t(418),n=t(9669),i=t(2886),s=t(9262),r=t(4581),c=t(759),d=t(4587),u=t(1247),m=t(4600);const p=(0,d.j)({color:String,expandIcon:{type:r.TX,default:"$expand"},collapseIcon:{type:r.TX,default:"$collapse"},hideActions:Boolean,focusable:Boolean,static:Boolean,ripple:{type:[Boolean,Object],default:!1},readonly:Boolean,...(0,s.u)()},"VExpansionPanelTitle"),v=(0,u.RW)()({name:"VExpansionPanelTitle",directives:{Ripple:c.n},props:p(),setup(e,l){let{slots:t}=l;const s=(0,a.WQ)(o.Yz);if(!s)throw new Error("[Vuetify] v-expansion-panel-title needs to be placed inside v-expansion-panel");const{backgroundColorClasses:r,backgroundColorStyles:c}=(0,i.z6)(e,"color"),d=(0,a.EW)((()=>({collapseIcon:e.collapseIcon,disabled:s.disabled.value,expanded:s.isSelected.value,expandIcon:e.expandIcon,readonly:e.readonly})));return(0,m.C)((()=>(0,a.bo)((0,a.bF)("button",{class:["v-expansion-panel-title",{"v-expansion-panel-title--active":s.isSelected.value,"v-expansion-panel-title--focusable":e.focusable,"v-expansion-panel-title--static":e.static},r.value,e.class],style:[c.value,e.style],type:"button",tabindex:s.disabled.value?-1:void 0,disabled:s.disabled.value,"aria-expanded":s.isSelected.value,onClick:e.readonly?void 0:s.toggle},[(0,a.bF)("span",{class:"v-expansion-panel-title__overlay"},null),t.default?.(d.value),!e.hideActions&&(0,a.bF)("span",{class:"v-expansion-panel-title__icon"},[t.actions?t.actions(d.value):(0,a.bF)(n.w,{icon:s.isSelected.value?e.collapseIcon:e.expandIcon},null)])]),[[(0,a.gN)("ripple"),e.ripple]]))),{}}})},418:function(e,l,t){t.d(l,{Yz:function(){return p},$t:function(){return y}});var a=t(641),o=t(9262),n=t(2858),i=t(4690),s=t(4663),r=t(7664),c=t(953),d=t(4587),u=t(1247),m=t(4600);const p=Symbol.for("vuetify:v-expansion-panel"),v=["default","accordion","inset","popout"],f=(0,d.j)({color:String,flat:Boolean,focusable:Boolean,static:Boolean,tile:Boolean,variant:{type:String,default:"default",validator:e=>v.includes(e)},readonly:Boolean,...(0,o.u)(),...(0,i.gL)(),...(0,s.X)(),...(0,r.yx)()},"VExpansionPanels"),y=(0,u.RW)()({name:"VExpansionPanels",props:f(),emits:{"update:modelValue":e=>!0},setup(e,l){let{slots:t}=l;(0,i.dB)(e,p);const{themeClasses:o}=(0,r.NX)(e),s=(0,a.EW)((()=>e.variant&&`v-expansion-panels--variant-${e.variant}`));return(0,n.Uh)({VExpansionPanel:{color:(0,c.lW)(e,"color"),readonly:(0,c.lW)(e,"readonly")},VExpansionPanelTitle:{focusable:(0,c.lW)(e,"focusable"),static:(0,c.lW)(e,"static")}}),(0,m.C)((()=>(0,a.bF)(e.tag,{class:["v-expansion-panels",{"v-expansion-panels--flat":e.flat,"v-expansion-panels--tile":e.tile},o.value,s.value,e.class],style:e.style},t))),{}}})},1720:function(e,l,t){t.d(l,{h:function(){return o}});t(5792);var a=t(2586);const o=(0,a.G)("v-spacer","div","VSpacer")}}]);
//# sourceMappingURL=819.e3020dcd.js.map